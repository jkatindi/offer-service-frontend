<app-offer-nav-bar></app-offer-nav-bar>

<div class="p-3">
  <div class="card">
    <div class="card-body">
      <ng-container *ngIf="this.listJob$ | async  as result "  [ngSwitch]="result.dataState"]>
        <ng-container *ngSwitchCase="DataStateEnum.LOADING">
          LOADING .........
        </ng-container>

        <ng-container *ngSwitchCase="DataStateEnum.ERROR">
          <div class="alert-danger">
            {{result.errorMessage}}
          </div>
        </ng-container>

        <ng-container *ngSwitchCase="DataStateEnum.LOADED">
          <div class="panel panel-primary" id="tableau">
            <div class="panel-heading">Available  Job offers</div>
            <div class="panel-body">
              <table class="table">
                <tr>
                  <th>Id offer</th><th>Title offer</th><th>Available places</th>
                  <th>details</th>
                </tr>
                <tr *ngFor="let offer of  result.data?.jobOffers">
                  <td>{{offer.id}}</td>
                  <td>{{offer.title}}</td>
                  <td>{{offer.availablePlace}}</td>
                  <td><a class="clickable" (click)="detailOffer(offer.id)">Detail</a></td>
                </tr>
              </table>
              <ul class="nav nav-pills">

                <li *ngFor="let item of [].constructor(result.data?.totalPages); let i=index">
                  <a   (click)="goToPage(i)" class="btn btn-secondary ml-2">{{i}}</a>
                </li>
              </ul>
            </div>
          </div>
        </ng-container>
      </ng-container>

    </div>
  </div>

</div>
